{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/dave/Desktop/Github/SpaceBook/Frontend/lib/providers/query-provider.tsx"],"sourcesContent":["'use client';\n\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport { useState, type ReactNode } from 'react';\n\nexport function QueryProvider({ children }: { children: ReactNode }) {\n  const [queryClient] = useState(\n    () =>\n      new QueryClient({\n        defaultOptions: {\n          queries: {\n            staleTime: 60 * 1000, // 1 minute\n            refetchOnWindowFocus: false,\n            retry: 1,\n          },\n        },\n      })\n  );\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      {children}\n      {process.env.NODE_ENV === 'development' && (\n        <ReactQueryDevtools initialIsOpen={false} />\n      )}\n    </QueryClientProvider>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AAJA;;;;;AAMO,SAAS,cAAc,EAAE,QAAQ,EAA2B;IACjE,MAAM,CAAC,YAAY,GAAG,IAAA,iNAAQ,EAC5B,IACE,IAAI,4LAAW,CAAC;YACd,gBAAgB;gBACd,SAAS;oBACP,WAAW,KAAK;oBAChB,sBAAsB;oBACtB,OAAO;gBACT;YACF;QACF;IAGJ,qBACE,8OAAC,6MAAmB;QAAC,QAAQ;;YAC1B;YACA,oDAAyB,+BACxB,8OAAC,0MAAkB;gBAAC,eAAe;;;;;;;;;;;;AAI3C"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///home/dave/Desktop/Github/SpaceBook/Frontend/lib/api.config.ts"],"sourcesContent":["// API Configuration\nexport const API_CONFIG = {\n  BASE_URL: process.env.NEXT_PUBLIC_API_URL || 'http://localhost:4253/api',\n  ENDPOINTS: {\n    AUTH: {\n      LOGIN: '/auth/login',\n      REGISTER: '/auth/register',\n      REFRESH: '/auth/refresh',\n      LOGOUT: '/auth/logout',\n    },\n    USERS: {\n      BASE: '/users',\n      BY_ID: (id: string) => `/users/${id}`,\n    },\n    SPACES: {\n      BASE: '/spaces',\n      BY_ID: (id: string) => `/spaces/${id}`,\n      BY_TYPE: (type: string) => `/spaces?type=${type}`,\n    },\n    BOOKINGS: {\n      BASE: '/bookings',\n      BY_ID: (id: string) => `/bookings/${id}`,\n      BY_STATUS: (status: string) => `/bookings?status=${status}`,\n    },\n    NOTIFICATIONS: {\n      BASE: '/notifications',\n      UNREAD: '/notifications/unread',\n      UNREAD_COUNT: '/notifications/unread/count',\n      BY_ID: (id: string) => `/notifications/${id}`,\n      MARK_READ: (id: string) => `/notifications/${id}/read`,\n      MARK_ALL_READ: '/notifications/read/all',\n    },\n  },\n} as const;\n\n"],"names":[],"mappings":"AAAA,oBAAoB;;;;;AACb,MAAM,aAAa;IACxB,UAAU,QAAQ,GAAG,CAAC,mBAAmB,IAAI;IAC7C,WAAW;QACT,MAAM;YACJ,OAAO;YACP,UAAU;YACV,SAAS;YACT,QAAQ;QACV;QACA,OAAO;YACL,MAAM;YACN,OAAO,CAAC,KAAe,CAAC,OAAO,EAAE,IAAI;QACvC;QACA,QAAQ;YACN,MAAM;YACN,OAAO,CAAC,KAAe,CAAC,QAAQ,EAAE,IAAI;YACtC,SAAS,CAAC,OAAiB,CAAC,aAAa,EAAE,MAAM;QACnD;QACA,UAAU;YACR,MAAM;YACN,OAAO,CAAC,KAAe,CAAC,UAAU,EAAE,IAAI;YACxC,WAAW,CAAC,SAAmB,CAAC,iBAAiB,EAAE,QAAQ;QAC7D;QACA,eAAe;YACb,MAAM;YACN,QAAQ;YACR,cAAc;YACd,OAAO,CAAC,KAAe,CAAC,eAAe,EAAE,IAAI;YAC7C,WAAW,CAAC,KAAe,CAAC,eAAe,EAAE,GAAG,KAAK,CAAC;YACtD,eAAe;QACjB;IACF;AACF"}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///home/dave/Desktop/Github/SpaceBook/Frontend/lib/api-client.ts"],"sourcesContent":["import axios, { AxiosError, InternalAxiosRequestConfig } from 'axios';\nimport { API_CONFIG } from './api.config';\n\n// Token storage keys\nconst ACCESS_TOKEN_KEY = 'spacebook_access_token';\nconst REFRESH_TOKEN_KEY = 'spacebook_refresh_token';\n\n// Create axios instance\nexport const apiClient = axios.create({\n  baseURL: API_CONFIG.BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  withCredentials: false,\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use(\n  (config: InternalAxiosRequestConfig) => {\n    const token = getAccessToken();\n    if (token && config.headers) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor for token refresh\napiClient.interceptors.response.use(\n  (response) => response,\n  async (error: AxiosError) => {\n    const originalRequest = error.config as InternalAxiosRequestConfig & { _retry?: boolean };\n\n    // If 401 and haven't retried yet, try to refresh token\n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n\n      try {\n        const refreshToken = getRefreshToken();\n        if (refreshToken) {\n          const response = await axios.post(\n            `${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.AUTH.REFRESH}`,\n            { refreshToken },\n            {\n              headers: {\n                'Content-Type': 'application/json',\n              },\n            }\n          );\n          \n          const { accessToken, refreshToken: newRefreshToken } = response.data;\n          if (accessToken && newRefreshToken) {\n            setTokens(accessToken, newRefreshToken);\n\n            // Retry original request with new token\n            if (originalRequest.headers) {\n              originalRequest.headers.Authorization = `Bearer ${accessToken}`;\n            }\n            return apiClient(originalRequest);\n          }\n        }\n      } catch (refreshError) {\n        // Refresh failed, logout user\n        clearTokens();\n        if (typeof window !== 'undefined') {\n          window.location.href = '/user/login';\n        }\n        return Promise.reject(error); // Reject with original error\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\n// Token management functions\nexport const setTokens = (accessToken: string, refreshToken: string) => {\n  if (typeof window !== 'undefined') {\n    localStorage.setItem(ACCESS_TOKEN_KEY, accessToken);\n    localStorage.setItem(REFRESH_TOKEN_KEY, refreshToken);\n  }\n};\n\nexport const getAccessToken = (): string | null => {\n  if (typeof window !== 'undefined') {\n    return localStorage.getItem(ACCESS_TOKEN_KEY);\n  }\n  return null;\n};\n\nexport const getRefreshToken = (): string | null => {\n  if (typeof window !== 'undefined') {\n    return localStorage.getItem(REFRESH_TOKEN_KEY);\n  }\n  return null;\n};\n\nexport const clearTokens = () => {\n  if (typeof window !== 'undefined') {\n    localStorage.removeItem(ACCESS_TOKEN_KEY);\n    localStorage.removeItem(REFRESH_TOKEN_KEY);\n  }\n};\n\n// Helper function to handle API errors\nexport const handleApiError = (error: unknown): string => {\n  if (axios.isAxiosError(error)) {\n    const message = error.response?.data?.message || error.response?.data?.error || error.message;\n    return Array.isArray(message) ? message.join(', ') : message || 'An error occurred';\n  }\n  return 'An unexpected error occurred';\n};\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAEA,qBAAqB;AACrB,MAAM,mBAAmB;AACzB,MAAM,oBAAoB;AAGnB,MAAM,YAAY,gJAAK,CAAC,MAAM,CAAC;IACpC,SAAS,kIAAU,CAAC,QAAQ;IAC5B,SAAS;QACP,gBAAgB;IAClB;IACA,iBAAiB;AACnB;AAEA,wCAAwC;AACxC,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACC,MAAM,QAAQ;IACd,IAAI,SAAS,OAAO,OAAO,EAAE;QAC3B,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,yCAAyC;AACzC,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,uDAAuD;IACvD,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC7D,gBAAgB,MAAM,GAAG;QAEzB,IAAI;YACF,MAAM,eAAe;YACrB,IAAI,cAAc;gBAChB,MAAM,WAAW,MAAM,gJAAK,CAAC,IAAI,CAC/B,GAAG,kIAAU,CAAC,QAAQ,GAAG,kIAAU,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,EAC5D;oBAAE;gBAAa,GACf;oBACE,SAAS;wBACP,gBAAgB;oBAClB;gBACF;gBAGF,MAAM,EAAE,WAAW,EAAE,cAAc,eAAe,EAAE,GAAG,SAAS,IAAI;gBACpE,IAAI,eAAe,iBAAiB;oBAClC,UAAU,aAAa;oBAEvB,wCAAwC;oBACxC,IAAI,gBAAgB,OAAO,EAAE;wBAC3B,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,aAAa;oBACjE;oBACA,OAAO,UAAU;gBACnB;YACF;QACF,EAAE,OAAO,cAAc;YACrB,8BAA8B;YAC9B;YACA;;YAGA,OAAO,QAAQ,MAAM,CAAC,QAAQ,6BAA6B;QAC7D;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;AAIK,MAAM,YAAY,CAAC,aAAqB;IAC7C;;AAIF;AAEO,MAAM,iBAAiB;IAC5B;;IAGA,OAAO;AACT;AAEO,MAAM,kBAAkB;IAC7B;;IAGA,OAAO;AACT;AAEO,MAAM,cAAc;IACzB;;AAIF;AAGO,MAAM,iBAAiB,CAAC;IAC7B,IAAI,gJAAK,CAAC,YAAY,CAAC,QAAQ;QAC7B,MAAM,UAAU,MAAM,QAAQ,EAAE,MAAM,WAAW,MAAM,QAAQ,EAAE,MAAM,SAAS,MAAM,OAAO;QAC7F,OAAO,MAAM,OAAO,CAAC,WAAW,QAAQ,IAAI,CAAC,QAAQ,WAAW;IAClE;IACA,OAAO;AACT"}},
    {"offset": {"line": 267, "column": 0}, "map": {"version":3,"sources":["file:///home/dave/Desktop/Github/SpaceBook/Frontend/lib/services/auth.service.ts"],"sourcesContent":["import { apiClient, setTokens, clearTokens, handleApiError, getAccessToken } from '../api-client';\nimport { API_CONFIG } from '../api.config';\nimport { User } from '../types';\n\nexport interface LoginCredentials {\n  email: string;\n  password: string;\n}\n\nexport interface RegisterData {\n  name: string;\n  email: string;\n  password: string;\n  role?: 'user' | 'admin';\n}\n\nexport interface AuthResponse {\n  user: {\n    id: string;\n    name: string;\n    email: string;\n    role: 'user' | 'admin';\n    status: 'active' | 'inactive';\n    avatar?: string;\n    createdAt?: string;\n  };\n  accessToken: string;\n  refreshToken: string;\n}\n\nexport const authService = {\n  async login(credentials: LoginCredentials): Promise<AuthResponse> {\n    try {\n      const response = await apiClient.post<AuthResponse>(\n        API_CONFIG.ENDPOINTS.AUTH.LOGIN,\n        credentials\n      );\n      setTokens(response.data.accessToken, response.data.refreshToken);\n      return response.data;\n    } catch (error) {\n      throw new Error(handleApiError(error));\n    }\n  },\n\n  async register(data: RegisterData): Promise<AuthResponse> {\n    try {\n      const response = await apiClient.post<AuthResponse>(\n        API_CONFIG.ENDPOINTS.AUTH.REGISTER,\n        data\n      );\n      setTokens(response.data.accessToken, response.data.refreshToken);\n      return response.data;\n    } catch (error) {\n      throw new Error(handleApiError(error));\n    }\n  },\n\n  async logout(): Promise<void> {\n    try {\n      const refreshToken = localStorage.getItem('spacebook_refresh_token');\n      if (refreshToken) {\n        await apiClient.post(API_CONFIG.ENDPOINTS.AUTH.LOGOUT, { refreshToken });\n      }\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      clearTokens();\n    }\n  },\n\n  async refreshToken(): Promise<AuthResponse> {\n    try {\n      const refreshToken = localStorage.getItem('spacebook_refresh_token');\n      if (!refreshToken) {\n        throw new Error('No refresh token available');\n      }\n      const response = await apiClient.post<AuthResponse>(\n        API_CONFIG.ENDPOINTS.AUTH.REFRESH,\n        { refreshToken }\n      );\n      // Backend returns { user, accessToken, refreshToken }\n      setTokens(response.data.accessToken, response.data.refreshToken);\n      return response.data;\n    } catch (error) {\n      clearTokens();\n      throw new Error(handleApiError(error));\n    }\n  },\n\n  async getCurrentUser(): Promise<User> {\n    try {\n      // For now, we'll decode the JWT to get user info\n      // In the future, we could add a /me endpoint\n      const token = getAccessToken();\n      if (!token) {\n        throw new Error('No token available');\n      }\n      \n      // Decode JWT payload (base64url decode)\n      try {\n        const parts = token.split('.');\n        if (parts.length !== 3) {\n          throw new Error('Invalid token format');\n        }\n        \n        const payload = JSON.parse(atob(parts[1]));\n        return {\n          id: payload.sub,\n          email: payload.email || '',\n          name: payload.name || payload.email?.split('@')[0] || 'User',\n          role: payload.role || 'user',\n          status: payload.status || 'active',\n          avatar: payload.avatar,\n        };\n      } catch (decodeError) {\n        throw new Error('Invalid token format');\n      }\n    } catch (error) {\n      clearTokens(); // Clear invalid token\n      throw error;\n    }\n  },\n};\n\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AA6BO,MAAM,cAAc;IACzB,MAAM,OAAM,WAA6B;QACvC,IAAI;YACF,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CACnC,kIAAU,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,EAC/B;YAEF,IAAA,iIAAS,EAAC,SAAS,IAAI,CAAC,WAAW,EAAE,SAAS,IAAI,CAAC,YAAY;YAC/D,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,MAAM,IAAI,MAAM,IAAA,sIAAc,EAAC;QACjC;IACF;IAEA,MAAM,UAAS,IAAkB;QAC/B,IAAI;YACF,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CACnC,kIAAU,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,EAClC;YAEF,IAAA,iIAAS,EAAC,SAAS,IAAI,CAAC,WAAW,EAAE,SAAS,IAAI,CAAC,YAAY;YAC/D,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,MAAM,IAAI,MAAM,IAAA,sIAAc,EAAC;QACjC;IACF;IAEA,MAAM;QACJ,IAAI;YACF,MAAM,eAAe,aAAa,OAAO,CAAC;YAC1C,IAAI,cAAc;gBAChB,MAAM,iIAAS,CAAC,IAAI,CAAC,kIAAU,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE;oBAAE;gBAAa;YACxE;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;QACjC,SAAU;YACR,IAAA,mIAAW;QACb;IACF;IAEA,MAAM;QACJ,IAAI;YACF,MAAM,eAAe,aAAa,OAAO,CAAC;YAC1C,IAAI,CAAC,cAAc;gBACjB,MAAM,IAAI,MAAM;YAClB;YACA,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CACnC,kIAAU,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,EACjC;gBAAE;YAAa;YAEjB,sDAAsD;YACtD,IAAA,iIAAS,EAAC,SAAS,IAAI,CAAC,WAAW,EAAE,SAAS,IAAI,CAAC,YAAY;YAC/D,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,IAAA,mIAAW;YACX,MAAM,IAAI,MAAM,IAAA,sIAAc,EAAC;QACjC;IACF;IAEA,MAAM;QACJ,IAAI;YACF,iDAAiD;YACjD,6CAA6C;YAC7C,MAAM,QAAQ,IAAA,sIAAc;YAC5B,IAAI,CAAC,OAAO;gBACV,MAAM,IAAI,MAAM;YAClB;YAEA,wCAAwC;YACxC,IAAI;gBACF,MAAM,QAAQ,MAAM,KAAK,CAAC;gBAC1B,IAAI,MAAM,MAAM,KAAK,GAAG;oBACtB,MAAM,IAAI,MAAM;gBAClB;gBAEA,MAAM,UAAU,KAAK,KAAK,CAAC,KAAK,KAAK,CAAC,EAAE;gBACxC,OAAO;oBACL,IAAI,QAAQ,GAAG;oBACf,OAAO,QAAQ,KAAK,IAAI;oBACxB,MAAM,QAAQ,IAAI,IAAI,QAAQ,KAAK,EAAE,MAAM,IAAI,CAAC,EAAE,IAAI;oBACtD,MAAM,QAAQ,IAAI,IAAI;oBACtB,QAAQ,QAAQ,MAAM,IAAI;oBAC1B,QAAQ,QAAQ,MAAM;gBACxB;YACF,EAAE,OAAO,aAAa;gBACpB,MAAM,IAAI,MAAM;YAClB;QACF,EAAE,OAAO,OAAO;YACd,IAAA,mIAAW,KAAI,sBAAsB;YACrC,MAAM;QACR;IACF;AACF"}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///home/dave/Desktop/Github/SpaceBook/Frontend/lib/providers/auth-provider.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useEffect, type ReactNode } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { User } from '../types';\nimport { getAccessToken, clearTokens } from '../api-client';\nimport { authService } from '../services/auth.service';\n\ninterface AuthContextType {\n  user: User | null;\n  isLoading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  register: (name: string, email: string, password: string, role?: 'user' | 'admin') => Promise<void>;\n  logout: () => Promise<void>;\n  setUser: (user: User | null) => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const router = useRouter();\n\n  useEffect(() => {\n    // Check if user is logged in on mount\n    const loadUser = async () => {\n      try {\n        const token = getAccessToken();\n        if (token) {\n          try {\n            // Try to get user info from token\n            const userInfo = await authService.getCurrentUser();\n            setUser(userInfo);\n          } catch (error) {\n            // Token might be invalid or expired, clear it\n            console.error('Failed to load user:', error);\n            clearTokens();\n            setUser(null);\n          }\n        } else {\n          setUser(null);\n        }\n      } catch (error) {\n        console.error('Error in loadUser:', error);\n        setUser(null);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    \n    loadUser();\n  }, []);\n\n  const login = async (email: string, password: string) => {\n    try {\n      const response = await authService.login({ email, password });\n      setUser(response.user);\n      // Redirect based on user role\n      if (response.user.role === 'admin') {\n        router.push('/admin/dashboard');\n      } else {\n        router.push('/user/dashboard');\n      }\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  const register = async (name: string, email: string, password: string, role?: 'user' | 'admin') => {\n    try {\n      const response = await authService.register({ name, email, password, role });\n      setUser(response.user);\n      router.push('/user/dashboard');\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  const logout = async () => {\n    try {\n      await authService.logout();\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      setUser(null);\n      router.push('/user/login');\n    }\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, isLoading, login, register, logout, setUser }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AACA;AANA;;;;;;AAiBA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,sCAAsC;QACtC,MAAM,WAAW;YACf,IAAI;gBACF,MAAM,QAAQ,IAAA,sIAAc;gBAC5B,IAAI,OAAO;oBACT,IAAI;wBACF,kCAAkC;wBAClC,MAAM,WAAW,MAAM,iJAAW,CAAC,cAAc;wBACjD,QAAQ;oBACV,EAAE,OAAO,OAAO;wBACd,8CAA8C;wBAC9C,QAAQ,KAAK,CAAC,wBAAwB;wBACtC,IAAA,mIAAW;wBACX,QAAQ;oBACV;gBACF,OAAO;oBACL,QAAQ;gBACV;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,sBAAsB;gBACpC,QAAQ;YACV,SAAU;gBACR,aAAa;YACf;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,IAAI;YACF,MAAM,WAAW,MAAM,iJAAW,CAAC,KAAK,CAAC;gBAAE;gBAAO;YAAS;YAC3D,QAAQ,SAAS,IAAI;YACrB,8BAA8B;YAC9B,IAAI,SAAS,IAAI,CAAC,IAAI,KAAK,SAAS;gBAClC,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,OAAO,IAAI,CAAC;YACd;QACF,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA,MAAM,WAAW,OAAO,MAAc,OAAe,UAAkB;QACrE,IAAI;YACF,MAAM,WAAW,MAAM,iJAAW,CAAC,QAAQ,CAAC;gBAAE;gBAAM;gBAAO;gBAAU;YAAK;YAC1E,QAAQ,SAAS,IAAI;YACrB,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA,MAAM,SAAS;QACb,IAAI;YACF,MAAM,iJAAW,CAAC,MAAM;QAC1B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;QACjC,SAAU;YACR,QAAQ;YACR,OAAO,IAAI,CAAC;QACd;IACF;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAW;YAAO;YAAU;YAAQ;QAAQ;kBAC9E;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 479, "column": 0}, "map": {"version":3,"sources":["file:///home/dave/Desktop/Github/SpaceBook/Frontend/app/providers.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { QueryProvider } from \"@/lib/providers/query-provider\"\nimport { AuthProvider } from \"@/lib/providers/auth-provider\"\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n  return (\n    <QueryProvider>\n      <AuthProvider>{children}</AuthProvider>\n    </QueryProvider>\n  )\n}\n"],"names":[],"mappings":";;;;;AAIA;AACA;AALA;;;;AAOO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACnE,qBACE,8OAAC,uJAAa;kBACZ,cAAA,8OAAC,qJAAY;sBAAE;;;;;;;;;;;AAGrB"}},
    {"offset": {"line": 509, "column": 0}, "map": {"version":3,"sources":["file:///home/dave/Desktop/Github/SpaceBook/Frontend/lib/components/protected-route.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter, usePathname } from 'next/navigation';\nimport { useAuth } from '../providers/auth-provider';\nimport { getAccessToken } from '../api-client';\n\nexport function ProtectedRoute({ \n  children, \n  requireAdmin = false \n}: { \n  children: React.ReactNode;\n  requireAdmin?: boolean;\n}) {\n  const { user, isLoading } = useAuth();\n  const router = useRouter();\n  const pathname = usePathname();\n  const token = getAccessToken();\n\n  // Don't protect login pages\n  const isLoginPage = pathname === '/user/login' || pathname === '/admin/login';\n\n  useEffect(() => {\n    // Skip protection on login pages\n    if (isLoginPage) return;\n\n    if (!isLoading && (!token || !user)) {\n      router.push('/user/login');\n    } else if (!isLoading && requireAdmin && user?.role !== 'admin') {\n      router.push('/user/dashboard');\n    }\n  }, [isLoading, token, user, router, requireAdmin, isLoginPage]);\n\n  // Don't show loading screen on login pages\n  if (isLoginPage) {\n    return <>{children}</>;\n  }\n\n  // Show loading while checking auth\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent\"></div>\n          <p className=\"mt-4 text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Redirect if not authenticated (already handled in useEffect, but show loading while redirecting)\n  if (!token || !user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent\"></div>\n          <p className=\"mt-4 text-muted-foreground\">Redirecting...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Check admin requirement\n  if (requireAdmin && user.role !== 'admin') {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOO,SAAS,eAAe,EAC7B,QAAQ,EACR,eAAe,KAAK,EAIrB;IACC,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,IAAA,gJAAO;IACnC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,QAAQ,IAAA,sIAAc;IAE5B,4BAA4B;IAC5B,MAAM,cAAc,aAAa,iBAAiB,aAAa;IAE/D,IAAA,kNAAS,EAAC;QACR,iCAAiC;QACjC,IAAI,aAAa;QAEjB,IAAI,CAAC,aAAa,CAAC,CAAC,SAAS,CAAC,IAAI,GAAG;YACnC,OAAO,IAAI,CAAC;QACd,OAAO,IAAI,CAAC,aAAa,gBAAgB,MAAM,SAAS,SAAS;YAC/D,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAW;QAAO;QAAM;QAAQ;QAAc;KAAY;IAE9D,2CAA2C;IAC3C,IAAI,aAAa;QACf,qBAAO;sBAAG;;IACZ;IAEA,mCAAmC;IACnC,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;;;;;;IAIlD;IAEA,mGAAmG;IACnG,IAAI,CAAC,SAAS,CAAC,MAAM;QACnB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;;;;;;IAIlD;IAEA,0BAA0B;IAC1B,IAAI,gBAAgB,KAAK,IAAI,KAAK,SAAS;QACzC,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ"}},
    {"offset": {"line": 633, "column": 0}, "map": {"version":3,"sources":["file:///home/dave/Desktop/Github/SpaceBook/Frontend/app/admin/layout.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { Providers } from \"../providers\"\nimport { ProtectedRoute } from \"@/lib/components/protected-route\"\n\nexport default function AdminLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <Providers>\n      <ProtectedRoute requireAdmin>{children}</ProtectedRoute>\n    </Providers>\n  )\n}\n"],"names":[],"mappings":";;;;;AAIA;AACA;AALA;;;;AAOe,SAAS,YAAY,EAClC,QAAQ,EAGT;IACC,qBACE,8OAAC,8HAAS;kBACR,cAAA,8OAAC,0JAAc;YAAC,YAAY;sBAAE;;;;;;;;;;;AAGpC"}}]
}